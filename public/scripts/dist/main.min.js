/*! FreeUKGenealogy-Website - main app - v1.0.0 - 2014-10-29 */

function Collapse(){var a=riot.observable(this);a.init=function(b,c){$("["+b+"]").each(function(){var d=$(this),e=d.attr(b),f=makeMq(e),g=function(b){b.matches?a.attach(d,c):a.detach(d)};f.addListener(g),g(f)})},a.attach=function(b,c){var d=b.attr(c);(void 0===d||""==d)&&(d="More Info"),b.attr("data-sc-collapse-attached",!0),b.prepend('<li class="collapse-trigger" data-sc-collapse-trigger>'+d+'<i class="icon__chevron-down" aria-hidden="true"></i></li>'),b.css({overflow:"hidden"});var e=b.find("[data-sc-collapse-trigger]");a.close(b,e,!0),e.on("click",function(){var c=$(this).attr("data-sc-collapse-trigger");"open"==c?a.close(b,e):a.open(b,e)})},a.detach=function(a){a.removeAttr("data-sc-collapse-attached").removeAttr("style"),a.find("[data-sc-collapse-trigger]").remove()},a.open=function(a,b){b.attr("data-sc-collapse-trigger","open"),b.find(".icon__chevron-down").toggleClass("icon__chevron-down icon__chevron-up");var c=b.attr("data-sc-collapse-original-height");a.animate({height:c},600)},a.close=function(a,b,c){b.attr("data-sc-collapse-trigger","closed"),b.find(".icon__chevron-up").toggleClass("icon__chevron-up icon__chevron-down"),b.attr("data-sc-collapse-original-height",a.outerHeight());var d=b.outerHeight(!0);c?a.css({height:d}):a.animate({height:d},600)}}function Fetch(){var a=riot.observable(this);a.init=function(a,b){$("["+a+"]").each(function(){var c=$(this).attr(a),d=$(this),e=$(this).attr(b);$.get(c,function(a){"replace"==e?d.html(a):"prepend"==e?d.prepend(a):d.append(a)})})}}function Gallery(){var a=riot.observable(this),b=new Modal,c="";a.init=function(b){c=b,$("["+c+"]").each(function(){var b=$(this),d=b.attr(c);switch(d){case"slide":a.attachSlide(b);break;case"lightbox":a.attachModal(b);break;case"fade":default:a.attachFade(b)}})},a.attachFade=function(a){var b={loop:!0,autoplay:!0,autoplayTimeout:8e3,autoplayHoverPause:!0,items:1,animateOut:"fadeOut",mouseDrag:!1,touchDrag:!0,dots:!1,nav:!0};a.addClass("owl-carousel").owlCarousel(b)},a.attachSlide=function(a){var b={items:1};"true"===a.attr(c+"-multiple")&&(b={items:4}),a.addClass("owl-carousel").owlCarousel(b),$(window).resize()},a.attachModal=function(a){var d=a.attr(c+"-fitimages"),e=a.find("a"),f="<div data-sc-gallery>";e.each(function(){f+=$(this).data("sc-caption")?"<figure><img src='"+$(this).attr("href")+"'><figcaption>"+$(this).data("sc-caption")+"</figcaption></figure>":"<figure><img src='"+$(this).attr("href")+"'></figure>"}),f+="</div>",e.on("click",function(a){a.preventDefault();var c=e.index($(this));b.show(),b.on("modalBeforeOpen",function(a){a.find("[data-sc-gallery]").length>0&&a.find("[data-sc-gallery]").trigger("to.owl.carousel",[c,"0"])}),b.on("modalOpen",function(a){if(a.find("[data-sc-gallery]").length<1){a.html(f);var b=a.find("[data-sc-gallery]");b.hide(),b.imagesLoaded(function(){"true"===d&&fitImages({imageWrapper:".modal figure",container:".modal-inner"}),b.owlCarousel({items:1,nav:!0,loop:!0,navText:['<i class="icon__chevron-left"></i>','<i class="icon__chevron-right"></i>']}),b.trigger("to.owl.carousel",[c,"0"]),b.show()})}$(window).resize()})})}}function Modal(){var a=riot.observable(this),b=$('<div class="modal"/>'),c=$('<div class="modal-inner"/>'),d=$('<button type="button" class="modal-close  icon__cancel"/>'),e=new Shade;b.hide().css({position:"fixed","z-index":"200"}).append(d).append(c),d.on("click",function(){a.hide()}),a.show=function(){e.show(),e.on("shadeOpen",function(){$("body").find(b).length<1&&$("body").append(b),a.trigger("modalBeforeOpen",c),b.fadeIn(250,function(){a.trigger("modalOpen",c)})})},a.hide=function(){b.fadeOut(250,function(){a.trigger("modalClosed"),e.hide()})}}function OffCanvas(){var a=riot.observable(this);a.run=function(a){$(a).data("sc-offcanvas-primary"),$(a).data("sc-offcanvas-secondary");$("body").toggleClass("offcanvas--active")}}function Popup(){var a=riot.observable(this);a.open=function(a,b,c,d){var e=window.screenLeft?window.screenLeft:window.screenX,f=window.screenTop?window.screenTop:window.screenY,g=e+window.innerWidth/2-c/2,h=f+window.innerHeight/2-d/2;return window.open(a,b,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=no, width="+c+", height="+d+", top="+h+", left="+g)}}function Shade(){var a=riot.observable(this),b=$('<div class="shade" data-sc-shade/>');b.css({position:"fixed",top:"0",left:"0",right:"0",bottom:"0","z-index":"200"}).hide(),a.show=function(){$("body").find(b).length<1&&$("body").append(b),b.fadeIn(50,function(){a.trigger("shadeOpen",b)})},a.hide=function(){b.fadeOut(50,function(){a.trigger("shadeClosed")})}}function Tabs(){var a=riot.observable(this);a.init=function(a){$("["+a+"]").each(function(){var b=$(this).attr(a);$(this).tabs("persist"===b?{create:uiWidgetRemoveClasses,activate:function(a,b){uiWidgetPersistHash(a,b,selector)}}:{create:uiWidgetRemoveClasses})})}}var fitImages=function(a){$(window).on("resize",function(){$(a.imageWrapper).height($(a.container).height()),$(a.imageWrapper).imgLiquid({fill:!1,horizontalAlign:"center",verticalAlign:"center"})}).resize()},uiWidgetRemoveClasses=function(){var a=this,b=["ui-corner-all","ui-corner-top","ui-corner-bottom","ui-corner-right","ui-corner-left","ui-corner-tl","ui-corner-tr","ui-corner-bl","ui-corner-br"];$.each(b,function(b,c){$("."+c,a).removeClass(c)})},uiWidgetPersistHash=function(a,b,c){var d="#"+b.newPanel.attr("id");$.route(d),$.route(function(a){$("a[href="+a+"]",c).click()})},lapStart=570,deskStart=1024,deskWideStart=1200,palmEnd=lapStart-1,lapEnd=deskStart-1,makeMq=function(a){switch(a){case"palm":return window.matchMedia("(max-width:"+palmEnd+"px)");case"lap":return window.matchMedia("(min-width:"+lapStart+"px) and (max-width:"+lapEnd+"px)");case"lapAndUp":return window.matchMedia("(min-width:"+lapStart+"px)");case"portable":return window.matchMedia("(max-width:"+lapEnd+"px)");case"desk":return window.matchMedia("(min-width:"+deskStart+"px)");case"deskWide":return window.matchMedia("(min-width:"+deskWideStart+"px)");default:return!1}};!function(){"use strict";window.collapse=new Collapse,collapse.init("data-sc-collapse","data-sc-collapse-trigger-text")}(),function(){"use strict";window.fetch=new Fetch,fetch.init("data-sc-fetch","data-sc-fetch-method")}(),function(){"use strict";window.gallery=new Gallery,gallery.init("data-sc-gallery")}(),function(){"use strict";window.offcanvas=new OffCanvas,$("[data-sc-offcanvas-trigger]").on("click",function(a){a.preventDefault(),offcanvas.run($(this))})}(),function(){"use strict";window.popup=new Popup,$("[data-sc-popup]").on("click",function(a){a.preventDefault(),popup.open($(this).attr("href"),"Twitter","640","420")})}(),function(){"use strict";window.tabs=new Tabs,tabs.init("data-sc-tabs")}(),function(){"use strict";$("input, textarea").placeholder()}();
//# sourceMappingURL=main.min.js.map